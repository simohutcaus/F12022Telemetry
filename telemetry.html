<html>
<head>
  <link href="bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <script src="bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script
  src="jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
</script>
</head>
<!-- <div class="main" style="padding-left: 250px">
<h1>Speed: <span class='speed'></span> </h1>
<h1>Gear: <span class='gear'></span> </h1>
<h1>RPM: <span class='rpm'></span> </h1>
<h1>Throttle: <span class='throttle'></span> </h1>
<h1>Steer: <span class='steer'></span> </h1>
<h1>Brake: <span class='brake'></span> </h1>
<h1>DRS: <span class='DRS'></span> </h1>
<h1>Brake 1 temp: <span class='B1T'></span> </h1>
<h1>Current Lap: <span class='T'></span> </h1>
<h1>Sector 1: <span class='S1'></span> </h1>
<h1>Sector 2: <span class='S2'></span> </h1>
<h1>Position: <span class='position'></span> </h1>
<h1>Lap Num: <span class='lap'></span> </h1>
</div> -->
<div style="background-color: black; padding-bottom: 600px">
<div class="container px-3 py-5" id="featured-3">
  <h2 class="pb-2 border-bottom" style="color: white"><img src = "F1.svg" alt="F1"/>  Pit Board</h2>
  <div style="display: flex; flex-direction: row;">
  <h2 style="color: white; padding-right: 50px">Session:</h2>
  <h2 style="color: white" class="session">Race</h2>
  </div>
  <div class="row g-4 py-5 row-cols-1 row-cols-lg-3">
    <div class="feature col">
      <div class="feature-icon bg-primary bg-gradient">
        <svg class="bi" width="1em" height="1em"><use xlink:href="#collection"></use></svg>
      </div>
      <h3 style="color: white">Speed</h2>
      <h4 class='speed' style="color: white"></h3>
    </div>
    <div class="feature col">
      <div class="feature-icon bg-primary bg-gradient">
        <svg class="bi" width="1em" height="1em"><use xlink:href="#people-circle"></use></svg>
      </div>
      <h3 style="color: white">Gear</h2>
      <h4 class='gear' style="color: white"></h3>
    </div>
    <div class="feature col">
      <div class="feature-icon bg-primary bg-gradient">
        <svg class="bi" width="1em" height="1em"><use xlink:href="#toggles2"></use></svg>
      </div>
      <h3 style="color: white">RPM</h2>
      <h4 class='rpm' style="color: white"></h3>
    </div>
  </div>
</div>
<div class="container px-4 py-5" id="featured-3">
  <div class="row g-4 py-5 row-cols-1 row-cols-lg-3">
    <div class="feature col">
      <div class="feature-icon bg-primary bg-gradient">
        <svg class="bi" width="1em" height="1em"><use xlink:href="#collection"></use></svg>
      </div>
      <h3 style="color: white">DRS</h2>
      <h4 class='drs' style="color: white"></h3>
    </div>
    <div class="feature col">
      <div class="feature-icon bg-primary bg-gradient">
        <svg class="bi" width="1em" height="1em"><use xlink:href="#people-circle"></use></svg>
      </div>
      <h3 style="color: white">Current Lap Time</h2>
      <h4 class='T' style="color: white"></h3>
    </div>
    <div class="feature col">
      <div class="feature-icon bg-primary bg-gradient">
        <svg class="bi" width="1em" height="1em"><use xlink:href="#toggles2"></use></svg>
      </div>
      <h3 style="color: white">Lap Number</h2>
      <h4 class='lap' style="color: white"></h3>
    </div>
  </div>
</div>
<div class="container px-4 py-5" id="featured-3">
  <div class="row g-4 py-5 row-cols-1 row-cols-lg-3">
    <div class="feature col">
      <div class="feature-icon bg-primary bg-gradient">
        <svg class="bi" width="1em" height="1em"><use xlink:href="#collection"></use></svg>
      </div>
      <h3 style="color: white">Sector 1</h2>
      <h4 class='s1' style="color: white"></h3>
    </div>
    <div class="feature col">
      <div class="feature-icon bg-primary bg-gradient">
        <svg class="bi" width="1em" height="1em"><use xlink:href="#people-circle"></use></svg>
      </div>
      <h3 style="color: white">Sector 2</h2>
      <h4 class='s2' style="color: white"></h3>
    </div>
    <div class="feature col">
      <div class="feature-icon bg-primary bg-gradient">
        <svg class="bi" width="1em" height="1em"><use xlink:href="#toggles2"></use></svg>
      </div>
      <h3 style="color: white">Position</h2>
      <h4 class='position' style="color: white"></h3>
    </div>
  </div>
</div>

</div>
<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous">
</script>

<script>

function gear(g){

  if(g == 0){return 'N'}
  else if(g == -1){return 'R'}
  else{ return g}

}

function drs(d) {
  if(d == 0) {return 'OFF'}
  else if (d == 1) {return 'ON'}
   else {return}
}

function session(d) {
  if(d == 10) {return 'Race'}
  else if (d == 5) {return 'Q1'}
  else if (d == 6) { return 'Q2'}
  else if (d == 7) { return 'Q3'}
  else {return 'Practice'}
}

websocket = new WebSocket("ws://127.0.0.1:6789/");

websocket.onmessage = function (event) {
    data = JSON.parse(event.data);
    console.log(data)
    if(data["type"] == "TELEMETRY"){
        $('.speed').text(data["SPEED"]+ ' KPH')
        $('.gear').text(gear(data["GEAR"]))
        $('.rpm').text(data["RPM"])
        $('.throttle').text(data["THROTTLE"])
        $('.steer').text(data["STEER"])
        $('.brake').text(data["BRAKE"])
        $('.DRS').text(drs(data["DRS"]))
        $('.B1T').text(data["TYRE1"] + ' PSI')
        $('.T').text(data["TIME"])
        $('.S1').text(data["SECTOR1"])
        $('.S2').text(data["SECTOR2"])
        $('.position').text(data["POSITION"])
        $('.lap').text(data["LAP"])|
        $('.session').text(session(data["SESSION"]))
        
    }
};


setInterval(function() {websocket.send(JSON.stringify({action:'TELEMETRY'}));},20);


</script>




</html>